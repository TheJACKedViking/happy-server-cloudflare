{
  "name": "happy-server-workers",
  "version": "1.0.0",
  "description": "Happy Server on Cloudflare Workers with Hono",
  "type": "module",
  "main": "src/index.ts",
  "scripts": {
    "preinstall": "node -e \"if(!process.env.INIT_CWD?.endsWith('/happy')){console.error('âŒ Run yarn install from monorepo root');process.exit(1)}\"",
    "help": "echo '\nHappy Server Workers - Available Scripts\n=========================================\n\nDevelopment:\n  dev                Start Wrangler dev server\n\nDeployment:\n  deploy             Show deployment help\n  deploy:dev         Deploy to development environment\n  deploy:prod        Deploy to production environment\n\nCode Quality:\n  typecheck          Type-check TypeScript\n  lint               Run oxlint\n  lint:fix           Run oxlint with auto-fix\n  format             Format code with Prettier\n\nTesting:\n  test               Run tests once\n  test:watch         Run tests in watch mode\n\nLoad Testing (HAP-263):\n  load-test:smoke     Quick smoke test (10 VUs, 30s)\n  load-test:scale     Scale test - 100+ connections\n  load-test:sustained Sustained load - 5+ minutes at 100 connections\n  load-test:stress    Stress test - 200+ connections\n  load-test:dev       Scale test against dev environment\n  load-test:prod      Scale test against production\n  Note: Requires k6 installed (brew install k6)\n  Note: Set AUTH_TOKEN env var for authenticated tests\n\nExtreme Load Testing (HAP-894):\n  load-test:extreme       Extreme test - 500+ connections (local)\n  load-test:spike-extreme Spike test - sudden burst to 600 connections\n  load-test:extreme-dev   Extreme test against dev environment\n  Note: Only run extreme tests against staging/dev, never production\n  Note: See docs/WEBSOCKET-CAPACITY-PLANNING.md for details\n\nDatabase (D1/Drizzle):\n  db:generate        Generate Drizzle migrations from schema\n  db:migrate         Apply migrations to remote dev D1 (default)\n  db:migrate:local   Apply migrations to local D1\n  db:migrate:prod    Apply migrations to remote prod D1\n  db:create          Create remote dev D1 database\n  db:create:prod     Create remote prod D1 database\n  db:status          Show remote dev database status (default)\n  db:status:local    Show local database status\n  db:reset:local     Reset local database (DESTRUCTIVE)\n  db:studio          Open Drizzle Studio GUI\n  db:seed            Seed remote dev database\n  db:seed:local      Seed local database\n  db:seed:preview    Preview seed SQL without executing\n  db:seed:test       Seed remote dev with test data\n  db:compare         Validate schema parity with Prisma\n\nMutation Testing (Stryker):\n  mutate             Full mutation test run with reports\n  mutate:incremental Fast incremental run (recommended)\n  mutate:dry-run     Verify setup without running mutations\n  mutate:report      Open HTML report in browser\n  Note: See reports/mutation/html/ for results\n'",
    "dev": "wrangler dev",
    "deploy": "./scripts/deploy.sh",
    "deploy:dev": "./scripts/deploy.sh dev",
    "deploy:prod": "./scripts/deploy.sh prod",
    "typecheck": "tsc --noEmit",
    "lint": "oxlint src --config oxlint.json --type-aware",
    "lint:fix": "oxlint src --config oxlint.json --type-aware --fix",
    "format": "oxfmt src/",
    "format:check": "oxfmt --check src/",
    "test": "vitest run",
    "clean": "rm -rf .wrangler/state/v3/cache",
    "test:watch": "vitest",
    "db:generate": "npx drizzle-kit generate",
    "db:migrate": "./scripts/db-init.sh migrate --env dev --remote",
    "db:migrate:local": "./scripts/db-init.sh migrate --env dev --local",
    "db:migrate:prod": "./scripts/db-init.sh migrate --env prod --remote",
    "db:create": "./scripts/db-init.sh create --env dev",
    "db:create:prod": "./scripts/db-init.sh create --env prod",
    "db:status": "./scripts/db-init.sh status --env dev --remote",
    "db:status:local": "./scripts/db-init.sh status --env dev --local",
    "db:reset:local": "./scripts/db-init.sh reset --env dev --local",
    "db:studio": "npx drizzle-kit studio",
    "db:seed": "tsx src/db/seed.ts > /tmp/seed.sql && wrangler d1 execute DB --env dev --remote --file=/tmp/seed.sql",
    "db:seed:local": "tsx src/db/seed.ts > /tmp/seed.sql && wrangler d1 execute DB --env dev --local --file=/tmp/seed.sql",
    "db:seed:preview": "tsx src/db/seed.ts",
    "db:seed:test": "tsx scripts/seed-test-data.ts > /tmp/seed-test.sql && wrangler d1 execute DB --env dev --remote --file=/tmp/seed-test.sql",
    "db:compare": "tsx src/db/comparison-tool.ts",
    "test:integration": "vitest run src/__tests__/",
    "test:coverage": "vitest run --coverage",
    "knip": "knip",
    "load-test:smoke": "k6 run load-tests/scenarios/websocket-performance.js",
    "load-test:scale": "k6 run --env TEST_MODE=scale load-tests/scenarios/websocket-performance.js",
    "load-test:sustained": "k6 run --env TEST_MODE=sustained load-tests/scenarios/websocket-performance.js",
    "load-test:stress": "k6 run --env TEST_MODE=stress load-tests/scenarios/websocket-performance.js",
    "load-test:extreme": "k6 run --env TEST_MODE=extreme load-tests/scenarios/websocket-performance.js",
    "load-test:spike-extreme": "k6 run --env TEST_MODE=spikeExtreme load-tests/scenarios/websocket-performance.js",
    "load-test:dev": "k6 run --env BASE_URL=https://happy-api-dev.enflamemedia.com --env TEST_MODE=scale load-tests/scenarios/websocket-performance.js",
    "load-test:prod": "k6 run --env BASE_URL=https://happy-api.enflamemedia.com --env TEST_MODE=scale load-tests/scenarios/websocket-performance.js",
    "load-test:extreme-dev": "k6 run --env BASE_URL=https://happy-api-dev.enflamemedia.com --env TEST_MODE=extreme load-tests/scenarios/websocket-performance.js",
    "mutate": "stryker run",
    "mutate:incremental": "stryker run --incremental",
    "mutate:dry-run": "stryker run --dryRunOnly",
    "mutate:report": "open reports/mutation/html/index.html || xdg-open reports/mutation/html/index.html 2>/dev/null || echo 'Open reports/mutation/html/index.html in your browser'"
  },
  "keywords": [
    "cloudflare",
    "workers",
    "hono",
    "typescript"
  ],
  "author": "Enflame Media LLC (howdy@enflamemedia.com)",
  "license": "MIT",
  "private": true,
  "devDependencies": {
    "@cloudflare/workers-types": "^4.20260127.0",
    "@happy/lint-rules": "workspace:*",
    "@stryker-mutator/core": "^9.4.0",
    "@stryker-mutator/typescript-checker": "^9.4.0",
    "@stryker-mutator/vitest-runner": "^9.4.0",
    "@types/jpeg-js": "^0.3.7",
    "@types/node": "^25.0.10",
    "@types/semver": "^7.7.1",
    "@types/upng-js": "^2.1.5",
    "@vitest/coverage-v8": "^4.0.18",
    "drizzle-kit": "^0.31.8",
    "knip": "^5.82.1",
    "oxlint": "^1.42.0",
    "oxlint-tsgolint": "^0.11.2",
    "prettier": "^3.8.1",
    "tsx": "^4.21.0",
    "typescript": "^5.9.3",
    "vitest": "^4.0.18",
    "wrangler": "^4.60.0"
  },
  "dependencies": {
    "@happy/errors": "workspace:*",
    "@happy/protocol": "workspace:*",
    "@hono/zod-openapi": "^1.2.0",
    "@sentry/cloudflare": "^10.37.0",
    "@stablelib/base64": "^2.0.1",
    "@stablelib/hex": "^2.0.1",
    "cloudflare": "^5.2.0",
    "drizzle-orm": "^0.45.1",
    "hono": "^4.11.7",
    "jose": "^6.1.3",
    "jpeg-js": "^0.4.4",
    "thumbhash": "^0.1.1",
    "tweetnacl": "^1.0.3",
    "upng-js": "^2.1.0",
    "zod": "^4.3.6"
  }
}
